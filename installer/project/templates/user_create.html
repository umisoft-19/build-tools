{% extends 'base.html' %}

{% block content %}

<div class="container">
    <div class="jumbotron">
        <h1 class="display-3">Create Superuser</h1>
        <p class="lead">Fill in the form Below</p>
        <hr class="my-2">
        <p>The user created here has root access to the rest of the application</p>
        <a class="btn btn-primary" href="/location" role="button">Previous</a>


    </div>
    <div class="row">
        <div class="col-sm-6">
            <div class="card text-left">
              <div class="card-body">
                <h4 class="card-title">Helper</h4>
                <p class="card-text">
                    <ul>
                        <li><b>Username:</b> Must be at least 8 characters long.</li>
                        <li><b>Email:</b> Must be a valid email with '@' and '.' characters.</li>
                        <li><b>Password:</b> Must be at least 8 characters long.</li>
                    </ul>
                </p>
              </div>
            </div>
        </div>
        <style>
            .form-error {
                color: #ff3322
            }
        </style>
        <div class="col-sm-6">
            <div class="card">
                <div class="card-body">
                    <form action="" method="POST" onsubmit="return validate()">
                        <div class="form-group">
                            <label for="username">Username:</label>
                            <input type="text" class="form-control" name="username" id="id_username" required>
                            <p class='form-error' id="username-errors"></p>
                        </div>
                        <div class="form-group">
                            <label for="username">Email:</label>
                            <input type="email" class="form-control" name="email" id="id_email" required>
                            <p class='form-error' id="email-errors"></p>
                        </div>
                        <div class="form-group">
                            <label for="password">Password:</label>
                            <input type="password" class="form-control" name="password" id="id_password" required>
                            <p id="password-errors" class='form-error'></p>
                        </div>
                        <div class="form-group">
                            <label for="password_2">Repeat Password:</label>
                            <input type="password" class="form-control" name="password_2" id="id_password_2" required>
                            <p id="password-2-errors" class='form-error'></p>
                        </div>
                        <input type="submit" value="Submit" class="btn btn-primary">
                    </form>
                </div>
            </div> 
            
        </div>
    </div>
</div>
<script>
    function validate(){
        var username = $('#id_username').val()
        if(username.length < 8){
            $('#username-errors').text('Name is too short')
            return false;
        }
        var email = $('#id_email').val()
        if(email.indexOf('@') === -1 || email.indexOf('.') === -1){
            $('#email-errors').text('Email invalid');
            return false
        }

        var pass1 = $('#id_password').val()
        var pass2 = $('#id_password_2').val()

        if(pass1.length < 8 || pass1 !== pass2){
            $('#password-errors').text('Password is invalid')
            $('#password-2-errors').text('Password is invalid')
            return false
        }
        return true
    }
</script>

{% endblock content %}